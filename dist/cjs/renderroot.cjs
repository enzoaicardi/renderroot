"use strict";class t{static current=new t;contexts=new Map;constructorCallbacks=[];disconnectedCallbacks=[]}class n extends HTMLElement{disconnectedCallback;constructor(){super();const n=t.current.constructorCallbacks.shift(),o=t.current.disconnectedCallbacks.shift();if(n)for(const t of n)t(this);this.disconnectedCallback=()=>{if(o)for(const t of o)t(this)}}}const o=document.createElement("div");function r(n,r){const e=t.current;t.current=r||new t;const s=n();return o.innerHTML=s,t.current=e,o.firstElementChild}function e(t){return n=>{const o=t[t.length-1];o&&o.push(n)}}customElements.define("render-root",n),exports.createContext=function(){const n=(o,r)=>{const e=n,s=t.current.contexts.get(e);t.current.contexts.set(e,o);const c=r();return t.current.contexts.set(e,s),c};return n},exports.createRoot=r,exports.renderRoot=function(n){return(...o)=>(t.current.constructorCallbacks.push([]),t.current.disconnectedCallbacks.push([]),"<render-root>"+n(...o)+"</render-root>")},exports.useContext=function(n){return t.current.contexts.get(n)},exports.useInnerRoot=function(){const n=new Map(t.current.contexts);return o=>{const e=new t;return e.contexts=new Map(n),r(o,e)}},exports.useLifeCycle=function(){return[e(t.current.constructorCallbacks),e(t.current.disconnectedCallbacks)]},exports.useRoot=function(){return t.current};
